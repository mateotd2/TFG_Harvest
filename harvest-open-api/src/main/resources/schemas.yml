################################################# COMPONENTS #######################################################

components:
  schemas:
    UpdateUserDTO:
      type: object
      required:
        - email
        - name
        - lastname
        - dni
        - nss
        - phone
        - birthdate

      properties:

        email:
          type: string
          format: email
          maxLength: 254
          example: juan@santiago.com
        name:
          type: string
          maxLength: 255
          example: juan
        lastname:
          type: string
          maxLength: 255
          example: santiago
        dni:
          type: string
          maxLength: 255
          example: 12345678Q
        nss:
          type: string
          maxLength: 255
          example: 123456789012
        phone:
          type: string
          maxLength: 255
          example: 123456789
        birthdate:
          type: string
          format: date
          example: 1990-08-19
      #          maxLength: 20
      additionalProperties: false



    NewUserDTO:
      type: object
      required:
        - username
        - password
        - roles
        - email
        - name
        - lastname
        - dni
        - nss
        - phone
        - birthdate

      properties:
        username:
          type: string
          maxLength: 255
          example: username
        password:
          type: string
          maxLength: 255
          example: passwordmorethan10digits
        roles:
          type: array
          maxItems: 5
          example: [ admin ]
          items:
            type: string
            maxLength: 255
        email:
          type: string
          format: email
          maxLength: 254
          example: mateo@mateo.com
        name:
          type: string
          maxLength: 255
          example: mateo
        lastname:
          type: string
          maxLength: 255
          example: tilves
        dni:
          type: string
          maxLength: 255
          example: 12345678Q
        nss:
          type: string
          maxLength: 255
          example: 123456789012
        phone:
          type: string
          maxLength: 255
          example: 123456789
        birthdate:
          type: string
          format: date
          example: 1990-08-19
      #          maxLength: 20
      additionalProperties: false

    NewWorkerDTO:
      type: object
      required:
        - name
        - lastname
        - dni
        - nss
        - phone
        - birthdate
        - address
      properties:
        name:
          type: string
          maxLength: 255
          example: mateo
        lastname:
          type: string
          maxLength: 255
          example: tilves
        dni:
          type: string
          maxLength: 255
          example: 12345678Q
        nss:
          type: string
          maxLength: 255
          example: 123456789012
        phone:
          type: string
          maxLength: 255
          example: 123456789
        birthdate:
          type: string
          format: date
          example: 1990-08-19
        address:
          type: string
          maxLength: 1024
          example: Ronda de Outeiro, nº 26 5ºA
      additionalProperties: false


    MessageResponseDTO:
      type: object
      required:
        - message
      properties:
        message:
          type: string
          maxLength: 4000
          example: "Usuario registrado correctamente"
      additionalProperties: false

    ChangePasswordDTO:
      type: object
      required:
        - newPassword
        - oldPassword
      properties:
        oldPassword:
          type: string
          maxLength: 255
          example: oldpassword
        newPassword:
          type: string
          maxLength: 255
          minLength: 12
          example: newPasswordLong
      additionalProperties: false

    SignInRequestDTO:
      type: object
      required:
        - username
        - password
      properties:
        username:
          type: string
          maxLength: 255
          example: userexample
        password:
          type: string
          maxLength: 255
          example: passwordexample
      additionalProperties: false

    SignInResponseDTO:
      type: object
      required:
        - id
        - username
        - tokenType
        - accessToken
        - roles
      properties:
        id:
          type: integer
          format: int64
          maximum: 9223372036854775807
          minimum: 0
          example: 1
        username:
          type: string
          maxLength: 255
          example: username
        tokenType:
          type: string
          maxLength: 255
          example: Bearer
        accessToken:
          type: string
          maxLength: 1000
          example: BearerToken
        roles:
          type: array
          maxItems: 5
          example: [ capataz, tractorista ]
          items:
            type: string
            maxLength: 255
      additionalProperties: false



    WorkerResponseDTO:
      type: object
      required:
        - id
        - name
        - lastname
        - dni
        - nss
        - phone
        - birthdate
        - address
      properties:
        name:
          type: string
          maxLength: 255
          example: mateo
        lastname:
          type: string
          maxLength: 255
          example: tilves
        dni:
          type: string
          maxLength: 255
          example: 12345678Q
        nss:
          type: string
          maxLength: 255
          example: 123456789012
        phone:
          type: string
          maxLength: 255
          example: 123456789
        birthdate:
          type: string
          format: date
          example: 1990-08-19
        address:
          type: string
          maxLength: 1024
          example: Ronda de Outeiro, nº 26 5ºA

      additionalProperties: false

    WorkerListDTO:
      type: array
      items:
        $ref: '#/components/schemas/WorkerResponseDTO'


    Error:
      type: object
      properties:
        path:
          description: Path al error
          type: string
          maxLength: 500
          nullable: false
          example: "/error"
        error:
          description: tipo de error
          type: string
          maxLength: 500
          nullable: false
          example: "Unauthorized"
        message:
          description: Mensaje de error explicativo
          type: string
          maxLength: 500
          nullable: false
          example: "Full authentication is required to access this resource"
        status:
          description: Codigo de error
          type: integer
          format: int32
          nullable: false
          example: 401
      additionalProperties: false

  securitySchemes:
    bearerAuth: # arbitrary name for the security scheme
      type: http
      scheme: bearer
      bearerFormat: JWT    # optional, arbitrary value for documentation purposes
